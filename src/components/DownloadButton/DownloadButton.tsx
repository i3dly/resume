import clsx from "clsx";
import { toJpeg } from "html-to-image";
import JsPdf from "jspdf";
import React, { CSSProperties, FC, MutableRefObject, useCallback, useState } from "react";

const AVATAR_DATA_URL_FALLBACK = "data:image/jpeg;base64,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";

const LETTER_PAPER_HEIGHT = 11;
const LETTER_PAPER_WIDTH = 8.5;

const useToPdf = (
	fileName: string,
	targets: readonly MutableRefObject<HTMLElement | null>[]
) => {
	const [loading, setLoading] = useState<boolean>(false);

	const getTargetElement = useCallback((target: MutableRefObject<HTMLElement | null>) => {
		const elem = target.current;

		if (!elem) return null;

		return elem;
	}, []);

	const toPdf = useCallback(async () => {
		setLoading(true);

		const dataUris = await Promise.all(
			targets
				.map((target) => getTargetElement(target))
				.filter((element) => !!element)
				.map(async (element) => {
					if (!element) throw new Error();

					const dataUri = await toJpeg(element, {
						imagePlaceholder: AVATAR_DATA_URL_FALLBACK
					});

					return dataUri;
				})
		);

		const jspdf = new JsPdf({
			orientation: "portrait",
			unit: "in",
			format: [
				LETTER_PAPER_WIDTH,
				LETTER_PAPER_HEIGHT
			]
		});

		const finalPdf = dataUris.reduce((pdf, dataUri, i) => {
			return (!!i ? pdf.addPage() : pdf)
				.addImage(
					dataUri,
					"JPEG",
					0,
					0,
					LETTER_PAPER_WIDTH,
					LETTER_PAPER_HEIGHT
				);
		}, jspdf);

		finalPdf.save(fileName);
	}, [fileName, getTargetElement, targets]);

	return { loading, toPdf };
};

export interface DownloadButtonProps {
	className?: string;
	fileName: string;
	style?: CSSProperties;
	targets: readonly MutableRefObject<HTMLElement | null>[];
}

export const DownloadButton: FC<DownloadButtonProps> = ({
	className,
	fileName,
	style,
	targets
}) => {
	const { loading, toPdf } = useToPdf(fileName, targets);

	return (
		<button
			className={clsx(
				"flex items-center justify-content",
				"h-12 px-3",
				"border border-gray-200 dark:border-gray-700/75 rounded-lg",
				"transition-colors ease-in-out duration-200",
				"focus:outline-none focus-visible:ring-2 focus-visible:ring-opacity-75",
				"cursor-pointer",
				className
			)}
			onClick={async () => {
				await toPdf();
			}}
			style={style}
			type="button"
		>
			Download Resume
		</button>
	);
};
